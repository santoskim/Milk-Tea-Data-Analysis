---
title: "Milk Tea Exploratory Data Analysis in the San Gabriel Valley "
author: "Kim Santos"
output: html_document
---

# **Table of Contents**

* Introduction
* Setup
* Data Wrangling
* Exploratory Data Analysis
* Conclusion


# **Introduction**

An exploratory data analysis is used to observe the experience of five individuals when they acquired milk tea drinks around the San Gabriel Valley in Southern California.

The Milk Tea data set was generated by the group of five, and it was frequently updated as they each provided information about: the **shop** name visited, which **city** the shop was located, travel **distance** from home to destination in miles, what their **reviewer name** is, **price** of the drink, the **drink name**, if they had **boba** toppings, how they **rate** their drink, what **rank** they consider the drink to be, and any **comments** overall.

This Exploratory Data Analysis will answer the following research questions:

### **Research Questions** 
> <sub> **RQ1**: Which city is the most to least visited? <br /> 
> **RQ2**: What is the average Distance Reviewers travel to each City? <br /> 
> **RQ3**: Is there a correlation between how far Reviewers travel and the cost of milk tea drinks? <br /> 
> **RQ4**: How are the Ratings in each city? <br /> 
> **RQ5**: Which City receives the most Boba consumption? <br /> 
> **RQ6**: Which Reviewers get Boba toppings in their drink? <br /> 
> **RQ7**: How much do Reviewers pay for their drinks? <br /> 

----------------------------------------------------------------------------

# **Setup**
```{r}
# This cell loads the necessary libraries needed to execute the project
library(readr)
library(ggplot2)
library(tidyverse)
```


```{r}
# The working directory is set to where the .csv file is stored in the computer
# The file is loaded and read with the variable name 'boba'.
setwd("~/Excel Documents")
boba <- read_csv("SGV Boba.csv")
```

# **Data Wrangling**
This section will load and clean the 'boba' data set. An overview of the data will be seen to get its general info and identify any values not applicable to their corresponding variables or are irrelevant observations for analysis. This provides the exploration of the data accurate results for the responses to our questions.

### Information to clean:
> <sub>
> 1. Check data types of variables <br />
> 2. Remove columns: Rank and Comments

```{r}
#view of the whole data set
as.data.frame(boba)
```

1. Check data types of variables
```{r}
# looking into the structure
str(boba)
```

The data type for each variable appears to be correctly identified. It would only be necessary to change the variables' data type if the analysis required for a specific type.


2. Remove columns: Rank and Comments
```{r}
# running head() to see final results
boba <- select(boba, -c("Rank", "Comments"))
head(boba)
```

The first few rows is seen to view the final result of the 'boba' data set after it has been cleaned. We now view the data set without the 'Rank' and 'Comments' variables.


# **Exploratory Data Analysis**
This section will cover answering the research questions we encountered in the beginning of the project.

<br /> 

#### **RQ1**: Which City is the most to least visited? 
```{r}
# group cities together and summarize the amount of reviewers and distance for each city
# graph City and Reviewer frequency into a bar plot
city_freq <- boba %>%
  group_by(City) %>%
  summarise(
            reviews = length(Reviewer),
            average_distance = mean(Distance))

city_freq %>%
  ggplot(aes(reorder(City, reviews) , y = reviews, fill = City)) +
  geom_bar(stat = "identity") +
  ggtitle(" Distribution of reviewers who visited each city") +
  xlab("City") +
  ylab("Reviewers") +
  theme(plot.title = element_text(hjust = 0.5), legend.position = 'none') +
  coord_flip()
```


**RQ1**: Analysis <br /> 
The most frequently visited city is San Gabriel with 20 visits, while multiple cities with the least of 1 visit are: West Covina, Monrovia, Little TOkyo, Koreatown, and Hacienda Heights.

<br /> 

#### **RQ2**: What is the average Distance Reviewers travel to each City? 
```{r}
# Graph City and the average distance into a bar graph
city_freq %>%
  ggplot(aes(reorder(City, average_distance) , y = average_distance, fill = City)) +
  geom_bar(stat = "identity") +
  ggtitle("Average distance to each city") +
  xlab("City") +
  ylab("Average Distance")+
  theme(plot.title = element_text(hjust = 0.5), legend.position = 'none') +
  coord_flip()
```

**RQ2**: Analysis <br /> 
The longest average Distance Reviewer(s) traveled to get a milk tea drink is around 33 miles to Costa Mesa, and the shortest average Distance to travel is around 1 mile to El Monte.

<br /> 
 
#### **RQ3**: Is there a correlation between how far Reviewers travel and the cost of milk tea drinks?
```{r}
# create scatter plot of the Price and Distance 
boba %>%
  ggplot(aes(Distance, Price)) + 
  geom_point() +
  ggtitle("Relationship Between Distance vs. Price") +
  theme(plot.title = element_text(hjust = 0.5), legend.position = "none") +
  geom_smooth(method = 'lm', se = FALSE)
```

**RQ3**: Analysis <br /> 
There is no correlation between the distance and price value of milk tea drinks. It appears that, no matter the distance, the price of a drink will  range around the same with the exception of outliers.

<br /> 

#### **RQ4**: How are the Ratings in each City?
```{r}
# create boxplots for each City based on Ratings

ggplot(boba, aes(x=City,y=Rating)) + 
  geom_boxplot() + 
  ggtitle("Ratings for all cities visited") +
  theme(axis.text.x = element_text(angle=60, hjust=1), plot.title = element_text(hjust = 0.5)) 
```

**RQ4**: Analysis <br /> 
Some Cities do not have a complete boxplot due to the fact that they have only one data that was observed. So, we only know how well those specific Cities does in terms of Rating set by one Reviewer.

Cities that do have a complete boxplot tells us how Reviewers rate them with the drinks they gathered. We can see how overall some Cities have 3 types of distributions- symmetrical, positively and negatively skewed. Since distributions vary across Studios, we can look into each studio and interpret how ratings are distributed individually.

<br /> 

#### **RQ5**: Which City receives the most Boba consumption?
```{r}
# create a groupby side by side barplot with each city based on the boba variable
boba %>%
  ggplot(aes(x = City,fill = Boba)) +
  geom_bar(position = position_dodge()) + 
  ggtitle("Boba Consumption in Each City") +
  theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) +
  scale_fill_manual(values = c("darkolivegreen", "darksalmon"))
```

**RQ5**: Analysis <br /> 
The bar graph shows a side by side frequency comparison of Reviewers who do and do not get Boba toppings in each City. The City with the most Boba consumption is in San Gabriel with a frequency of 10 out of the total 20 visits. The city with the least Boba consumption is in Alhambra with an estimated frequency of 10 out of the total 14 visits

<br /> 

#### **RQ6**: Which Reviewers get Boba toppings in their drink?
```{r}
# create a groupby side by side comparison between reviewers based on the boba variable
got_boba <- boba %>%
  ggplot(aes(x = Boba, fill = Reviewer)) +
  geom_bar(position = position_dodge()) +
  ggtitle("Reviewers who did and did not get boba toppings in their drinks") +
  labs(x = "Reviewers choice to get boba toppings", y = "Drinks with boba toppings") +
  theme(plot.title = element_text(hjust = 0.5))

got_boba + scale_fill_brewer(palette = "Spectral")
```

**RQ6**: Analysis <br /> 
The bar graph shows a side-by-side comparison between reviewers who did and did not get boba toppings in their drink. Kim has the highest frequency of getting boba toppings of about 18 out of 21 drinks. Kimberly has the highest frequency of not getting boba toppings of about 20 out of 23 drinks.

<br /> 

#### **RQ7**: How much do Reviewers Pay for their drinks?
```{r}
# create histogram to view frequency of prices for each reviewer

par(mfrow = c(2,3))

christina_price <- hist(boba$Price[boba$Reviewer == "Christina"], main = "Christina's Price Frequency", xlab = "Price", col = 'lightcoral')

kim_price <- hist(boba$Price[boba$Reviewer == "Kim"], main = "Kim's Price Frequency", xlab = "Price", col = 'lightcyan')

kimberly_price <- hist(boba$Price[boba$Reviewer == "Kimberly"], main = "Kimberly's Price Frequency", xlab = "Price", col = 'khaki1')

nicole_price <- hist(boba$Price[boba$Reviewer == "Nicole"], main = "Nicole's Price Frequency", xlab = "Price", col = 'moccasin')

vanessa_price <- hist(boba$Price[boba$Reviewer == "Vanessa"], main = "Vanessa's Price Frequency", xlab = "Price", col = 'lavenderblush')
```



```{r}
# create boxplot for each reviewer based on price variable to compare between eachother
ggplot(boba, aes(x=Reviewer,y=Price, fill = Reviewer)) + 
  geom_boxplot() + 
  theme_classic() +
  theme(axis.text.x = element_text(angle=60, hjust=1)) +
  theme(legend.position = 'none', plot.title = element_text(hjust = 0.5)) +
  scale_fill_manual(values = c("lightcoral", "lightcyan", "khaki1", "moccasin", "lavenderblush")) +
  ggtitle("Reviewer's prices on milk tea drinks")
  
```

**RQ7**: Analysis <br /> 
A histogram is shown on how much each reviewers pay for their drinks. It appears that between all Reviewers, they have a high frequency to pay around $4-6 for their drinks while having a few lower or higher frequencies to pay within that range. <br /> 

A boxplot is another visualization to show the price reviewers would pay for milk tea drinks. We can see a symmetrical, positive and negative skewed distribution. All reviewers have around the same 75th percentile, and, with the exception of one reviewer, have around the same 25th percentile. This allows us to interpret comparisons where each reviewer would pay for their drinks, and whether they fall positively or negatively distributed. 







----------------------------------------------------------------------

# **Conclusion**

The exploratory data analysis has shown Reviewers' experience when getting milk tea drinks around the San Gabriel Valley.

Each city varied in the amount of visits, where San Gabriel had 20 visits whereas West Covina, Monrovia, Little TOkyo, Koreatown, and Hacienda Heights only had 1 visit. It was important to take note the cities with 1 visit since each city was explored. It allowed the analysis portion to consider any limitations and/ or reductions when research questions were answered.

The average distance to travel to each city between all reviewers ranged from a minimum of 1 mile to a maximum of 33 miles. The ratings for the cities have different distributions, where we found symmetrical and positively and negatively skewed distributions. Since there is a wide range of cities, it is found easier to look into each city for their rating distributions and compare between other cities. It was also seen there was no correlation between the distance and prices when traveling. So, no matter the distance, the prices would vary around the same. 

Each reviewer had different frequencies on whether they got boba toppings or not. The consumption of boba toppings contributed to a comparison frequency for each city. We were able to see which city had the most to least boba toppings. Lastly, the price frequency reviewers paid for their drinks was also seen. Each reviewer showed us they frequently paid around $4-6 to pay.





----------------------------------------------------------------------------
### **Limitations**
* **Sugar and ice levels preference**. Each reviewer was given options of the amount of sugar and ice levels they wanted in their drinks. This causes the rating to be more subjective due to the reviewers taste preference.

* **Travel distance**. The experience to travel to get a milk tea, may be a factor to how reviewers rate their drinks. In other words, reviewers may think the distance may or may not be worth to get a drink- affecting the rating they provide.